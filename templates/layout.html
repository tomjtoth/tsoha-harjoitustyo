<!DOCTYPE html>
<html lang="fi">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>{% block title %}{% endblock %}</title>
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ©¸</text></svg>">
    <link rel="stylesheet" href="static/styles.css">
</head>

<body>
    <nav>
        <a href="/">PÃ¤Ã¤sivu</a>
        <a href="/comments">Kertomukset</a>
        {% if session.user %}
        <a href="/donate">RekisterÃ¶i luovutus</a>
        <a class="auth" href="/logout">Kirjaudu ulos</a>
        {% else %}
        <a class="auth" href="/register">RekisterÃ¶i</a>
        <a class="auth" href="/login">Kirjaudu sisÃ¤Ã¤n</a>
        {% endif %}
        <a class="auth" title="toggle between dark/light mode">ðŸŒ—</a>
    </nav>
    <h1>Verenluovutus-sovellus</h1>
    <hr>
    {% block body %}{% endblock %}
</body>
<script>
    path = window.location.pathname;
    for (const a of document.querySelectorAll('nav>a')) {
        if (a.href.endsWith(path)) {
            a.classList.add('active');
        } else {
            a.classList.remove('active');
        }
    }
</script>
<script>
    document.documentElement.setAttribute('color-theme',
        localStorage.getItem('color-theme') || 'light'
    );

    // settings
    document.querySelector('nav')
        .addEventListener('click', ({ target: { href, title } }) => {

            if (href) return;

            if (title.includes('dark')) {
                const color_theme = document.documentElement
                    .getAttribute('color-theme') == 'dark'
                    ? 'light'
                    : 'dark';
                document.documentElement.setAttribute('color-theme', color_theme);
                localStorage.setItem('color-theme', color_theme);
            }

        })
</script>

</html>